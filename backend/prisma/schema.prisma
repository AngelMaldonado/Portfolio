generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

/// Angel's skill (name, image)
model Skill {
  id    String @id @default(auto()) @map("_id") @db.ObjectId
  name  String
  image String
}

/// Angel's project (startDate, endDate, title, description)
model Project {
  id          String   @id @default(auto()) @map("_id") @db.ObjectId
  startDate   DateTime
  endDate     DateTime
  title       String   @unique
  description String
  project_url String   @unique
  repo_url    String   @unique
}

/// Post entity
model Post {
  id          String    @id @default(auto()) @map("_id") @db.ObjectId
  slug        String    @unique
  lastUpdated DateTime
  title       String
  abstract    String
  imageUrl    String
  markdownUrl String
  stars       Json
  starsAvg    Float
  comments    Comment[]
}

/// User entity
model User {
  id       String    @id @default(auto()) @map("_id") @db.ObjectId
  email    String    @unique
  name     String?
  comments Comment[]
}

/// Comment entity
model Comment {
  id      String  @id @default(auto()) @map("_id") @db.ObjectId
  comment String
  post    Post    @relation(fields: [postId], references: [id])
  postId  String  @db.ObjectId
  User    User?   @relation(fields: [userId], references: [id])
  userId  String? @db.ObjectId
}
